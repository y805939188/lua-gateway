2020/08/27 21:22:57 [notice] 36140#2630781: using the "kqueue" event method
2020/08/27 21:22:57 [notice] 36140#2630781: openresty/1.17.8.2
2020/08/27 21:22:57 [notice] 36140#2630781: built by clang 11.0.3 (clang-1103.0.32.29)
2020/08/27 21:22:57 [notice] 36140#2630781: OS: Darwin 19.0.0
2020/08/27 21:22:57 [notice] 36140#2630781: hw.ncpu: 4
2020/08/27 21:22:57 [notice] 36140#2630781: net.inet.tcp.sendspace: 131072
2020/08/27 21:22:57 [notice] 36140#2630781: kern.ipc.somaxconn: 128
2020/08/27 21:22:57 [notice] 36140#2630781: getrlimit(RLIMIT_NOFILE): 10240:9223372036854775807
2020/08/27 21:22:57 [notice] 36141#2630788: start worker processes
2020/08/27 21:22:57 [notice] 36141#2630788: start worker process 36142
2020/08/28 13:56:01 [notice] 42877#2740085: using the "kqueue" event method
2020/08/28 13:56:01 [notice] 42877#2740085: openresty/1.17.8.2
2020/08/28 13:56:01 [notice] 42877#2740085: built by clang 11.0.3 (clang-1103.0.32.29)
2020/08/28 13:56:01 [notice] 42877#2740085: OS: Darwin 19.0.0
2020/08/28 13:56:01 [notice] 42877#2740085: hw.ncpu: 4
2020/08/28 13:56:01 [notice] 42877#2740085: net.inet.tcp.sendspace: 131072
2020/08/28 13:56:01 [notice] 42877#2740085: kern.ipc.somaxconn: 128
2020/08/28 13:56:01 [notice] 42877#2740085: getrlimit(RLIMIT_NOFILE): 10240:9223372036854775807
2020/08/28 13:56:01 [notice] 42878#2740092: start worker processes
2020/08/28 13:56:01 [notice] 42878#2740092: start worker process 42879
2020/08/28 13:56:01 [error] 42879#2740093: init_worker_by_lua_file error: /usr/local/openresty/lua/upstreams.lua:2: module 'utils/utils' not found:
	no field package.preload['utils/utils']
	no file '/usr/local/openresty/nginx/lua/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils/init.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils/init.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils/init.lua'
	no file './utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/luajit-2.1.0-beta3/utils/utils.lua'
	no file '/usr/local/share/lua/5.1/utils/utils.lua'
	no file '/usr/local/share/lua/5.1/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/lua/5.1/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/lua/5.1/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.so'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.so'
	no file './utils/utils.so'
	no file '/usr/local/lib/lua/5.1/utils/utils.so'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/lib/lua/5.1/utils/utils.so'
	no file '/usr/local/lib/lua/5.1/loadall.so'
stack traceback:
	[C]: in function 'require'
	/usr/local/openresty/lua/upstreams.lua:2: in main chunk
2020/08/28 13:56:04 [error] 42879#2740093: *2 failed to run balancer_by_lua*: ./lua/upstreams.lua:2: module 'utils/utils' not found:
	no field package.preload['utils/utils']
	no file '/usr/local/openresty/nginx/lua/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils/init.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils/init.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils/init.lua'
	no file './utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/luajit-2.1.0-beta3/utils/utils.lua'
	no file '/usr/local/share/lua/5.1/utils/utils.lua'
	no file '/usr/local/share/lua/5.1/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/lua/5.1/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/lua/5.1/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.so'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.so'
	no file './utils/utils.so'
	no file '/usr/local/lib/lua/5.1/utils/utils.so'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/lib/lua/5.1/utils/utils.so'
	no file '/usr/local/lib/lua/5.1/loadall.so'
stack traceback:
	[C]: in function 'require'
	./lua/upstreams.lua:2: in main chunk
	[C]: in function 'require'
	/usr/local/openresty/lua/balaner.lua:3: in main chunk while connecting to upstream, client: 127.0.0.1, server: _, request: "GET / HTTP/1.1", host: "localhost"
2020/08/28 13:56:07 [error] 42879#2740093: *3 failed to run balancer_by_lua*: /usr/local/openresty/lua/balaner.lua:4: attempt to index local 'upstreams' (a userdata value)
stack traceback:
	/usr/local/openresty/lua/balaner.lua:4: in main chunk while connecting to upstream, client: 127.0.0.1, server: _, request: "GET / HTTP/1.1", host: "localhost"
2020/08/28 13:57:57 [notice] 42878#2740092: signal 1 (SIGHUP) received from 43566, reconfiguring
2020/08/28 13:57:57 [notice] 42878#2740092: reconfiguring
2020/08/28 13:57:57 [notice] 42878#2740092: using the "kqueue" event method
2020/08/28 13:57:57 [notice] 42878#2740092: start worker processes
2020/08/28 13:57:57 [notice] 42878#2740092: start worker process 43572
2020/08/28 13:57:57 [error] 43572#2744426: init_worker_by_lua_file error: /usr/local/openresty/lua/upstreams.lua:2: module 'utils/utils' not found:
	no field package.preload['utils/utils']
	no file '/usr/local/openresty/nginx/lua/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils/init.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils/init.ljbc'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils/init.lua'
	no file './utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/luajit-2.1.0-beta3/utils/utils.lua'
	no file '/usr/local/share/lua/5.1/utils/utils.lua'
	no file '/usr/local/share/lua/5.1/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/lua/5.1/utils/utils.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/share/lua/5.1/utils/utils/init.lua'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/site/lualib/utils/utils.so'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/lualib/utils/utils.so'
	no file './utils/utils.so'
	no file '/usr/local/lib/lua/5.1/utils/utils.so'
	no file '/usr/local/Cellar/openresty/1.17.8.2_1/luajit/lib/lua/5.1/utils/utils.so'
	no file '/usr/local/lib/lua/5.1/loadall.so'
stack traceback:
	[C]: in function 'require'
	/usr/local/openresty/lua/upstreams.lua:2: in main chunk
2020/08/28 13:57:57 [notice] 42879#2740093: gracefully shutting down
2020/08/28 13:57:57 [notice] 42878#2740092: signal 23 (SIGIO) received
2020/08/28 13:57:57 [notice] 42878#2740092: signal 23 (SIGIO) received
2020/08/28 13:57:57 [notice] 42879#2740093: exiting
2020/08/28 13:57:57 [notice] 42878#2740092: signal 20 (SIGCHLD) received from 42879
2020/08/28 13:57:57 [notice] 42878#2740092: worker process 42879 exited with code 0
2020/08/28 13:57:57 [notice] 42878#2740092: signal 23 (SIGIO) received
2020/08/28 13:57:57 [notice] 42878#2740092: signal 23 (SIGIO) received from 43572
2020/08/28 14:05:42 [notice] 45403#2757566: using the "kqueue" event method
2020/08/28 14:05:42 [notice] 45403#2757566: openresty/1.17.8.2
2020/08/28 14:05:42 [notice] 45403#2757566: built by clang 11.0.3 (clang-1103.0.32.29)
2020/08/28 14:05:42 [notice] 45403#2757566: OS: Darwin 19.0.0
2020/08/28 14:05:42 [notice] 45403#2757566: hw.ncpu: 4
2020/08/28 14:05:42 [notice] 45403#2757566: net.inet.tcp.sendspace: 131072
2020/08/28 14:05:42 [notice] 45403#2757566: kern.ipc.somaxconn: 128
2020/08/28 14:05:42 [notice] 45403#2757566: getrlimit(RLIMIT_NOFILE): 10240:9223372036854775807
2020/08/28 14:05:42 [notice] 45404#2757572: start worker processes
2020/08/28 14:05:42 [notice] 45404#2757572: start worker process 45405
